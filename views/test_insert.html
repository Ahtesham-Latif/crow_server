<form id="doctorForm">
    <h3>Doctor</h3>
    <input type="text" name="name" placeholder="Doctor Name" required>
    <input type="text" name="phone" placeholder="Phone" required>

    <!-- Category dropdown will be filled dynamically -->
    <select id="categorySelect" name="category_id" required>
        <option value="">Loading categories...</option>
    </select>

    <input type="number" name="experience_years" placeholder="Experience Years" required>
    <input type="text" name="qualification" placeholder="Qualification">
    <input type="number" name="ratings" placeholder="Ratings">
    <button type="submit">Add Doctor</button>
</form>

<script>
async function fetchCategories(){
    try {
        const res = await fetch("/get_categories");
        const categories = await res.json();
        const select = document.getElementById("categorySelect");
        select.innerHTML = ''; // clear loading text
        categories.forEach(cat => {
            const option = document.createElement("option");
            option.value = cat.category_id;
            option.textContent = cat.category_name;
            select.appendChild(option);
        });
    } catch(err){
        console.error("Failed to fetch categories:", err);
    }
}

// Call on page load
window.addEventListener("DOMContentLoaded", fetchCategories);
</script>
